<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>Red River Scramble DBBB Route</title>
    <!--Change this!! -->
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>
        <!--2nd attempt at legend entry -->
        <style>
            .legend label,
            .legend span {
                display:block;
                float:left;
                height:15px;
                width:20%;
                text-align:center;
                font-size:9px;
                color:#808080;
            }
        </style>

        <!-- Setting the display of this container to none so can
             add it programmatically to `legendControl` -->
        <div id='legend' style='display:none;'>
            <strong>Red River Rally Daniel Boone Backcountry Byway
                2020 Route with Elevation</strong>
            <nav class='legend clearfix'>
                <span style='background:#F1EEF6;'></span>
                <span style='background:#BDC9E1;'></span>
                <span style='background:#74A9CF;'></span>
                <span style='background:#2B8CBE;'></span>
                <span style='background:#045A8D;'></span>
                <label>0 - 20%</label>
                <label>40%</label>
                <label>60%</label>
                <label>80%</label>
                <label>100%</label>
                <small>Source: <a href="https://redriverscramble.com/where-to-ride/">RRS DBBB ride route</a></small>
        </div>
        <!--end of attempt-->

    <div id='map'></div>

    <script>
        // Change this to your Access token ----------------------
        mapboxgl.accessToken = 'pk.eyJ1IjoicmNyYW1zZXkiLCJhIjoiY2tpN3UxOTJwMnh2ejJycXFja3NxemRocyJ9.cbhIjbrLpEGG0HkQS3fGLA';
        // ------------------------------------------------

        var map = new mapboxgl.Map({
            container: 'map',

            // Change this to your style --------------------
            style: 'mapbox://styles/rcramsey/ckirjbysg014819lg0tqy94d9',
            // ----------------------------------------------

            // Change to your location ----------------------
            zoom: 11.5,
            center: [-83.696, 37.723],
            pitch: 60,
            bearing: 0
            // ----------------------------------------------

        });

        //additonal portion of attempt in adding legend
        map.legendControl.addLegend(document.getElementByID('legend').innerHTML);
        //end of additional portion needed to add legend

        // Add geolocate control to the map.
        map.addControl(new mapboxgl.GeolocateControl({
            positionOptions: {
                enableHighAccuracy: true
            },
            trackUserLocation: true
        }));

        map.on('load', function () {
            map.addSource('mapbox-dem', {
                'type': 'raster-dem',
                'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
                'tileSize': 512,
                'maxzoom': 14
            });
            // add the DEM source as a terrain layer with exaggerated height
            map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });

            // add a sky layer that will show when the map is highly pitched
            map.addLayer({
                'id': 'sky',
                'type': 'sky',
                'paint': {
                    'sky-type': 'atmosphere',
                    'sky-atmosphere-sun': [0.0, 0.0],
                    'sky-atmosphere-sun-intensity': 15
                }
            });
        });
    </script>

</body>

</html>